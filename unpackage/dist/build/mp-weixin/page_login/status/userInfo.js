(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["page_login/status/userInfo"],{"0c72":function(e,n,t){"use strict";(function(e,n){var r=t("4ea4");t("106e");r(t("66fd"));var o=r(t("e852"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(o.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},3183:function(e,n,t){"use strict";(function(e){var r=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("2eee")),s=r(t("c973")),a=r(t("9523")),u=t("26cb");t("b128");function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,a.default)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f={data:function(){return{cdn:this.$conf.CDN_HOST,userName:"",userPhone:"",psdahoto:null,isNew:"",nicknameError:"",phoneError:""}},watch:{personMsg:{deep:!0,handler:function(e){this.userName=e.name,this.userPhone=e.phone,this.photo=e.head}},getPhoneRes:function(e){this.userPhone=e}},computed:i(i({},(0,u.mapState)({setRes:function(e){return e.user.setPersonRes},personMsg:function(e){return e.user.getPersonRes},personMsgForm1:function(e){return e.user.getPersonForm},getPhoneRes:function(e){return e.user.getPhoneRes}})),{},{btnBool:function(){return""==this.userName||""==this.userPhone||""==this.photo}}),methods:i(i({},(0,u.mapActions)({setPersonMsg_fun:"user/setPerson",getPersonMsg_fun:"user/getPerson",getPhone_fun:"user/getPhone"})),{},{validateNickname:function(){var e=this.userName;0===e.length?this.nicknameError="昵称不能为空":/^[\u4E00-\u9FA5]{2,10}$/.test(e)?this.nicknameError="":this.nicknameError="昵称必须为2~10个汉字"},validatePhone:function(){var e=this.userPhone;0===e.length?this.phoneError="手机号码不能为空":/^\d{11}$/.test(e)?this.phoneError="":this.phoneError="请输入正确的手机号码"},sub:function(){var e=this;return(0,s.default)(o.default.mark((function n(){var t;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.validateNickname(),e.validatePhone(),""==e.nicknameError){n.next=7;break}console.log(e.nicknameError),e.$win.nlog(e.nicknameError),n.next=16;break;case 7:if(""==e.phoneError){n.next=12;break}console.log(e.phoneError),e.$win.nlog(e.phoneError),n.next=16;break;case 12:return t={userId:e.$db.getSync("userId"),nickName:e.userName,phone:e.userPhone,photo:e.photo,new:1},n.next=15,e.setPersonMsg_fun(t).then((function(){0==e.setRes.code&&e.$win.show("/page_login/index_2?statu=no")}));case 15:n.sent;case 16:case"end":return n.stop()}}),n)})))()},getPersonMsg:function(){var e=this;return(0,s.default)(o.default.mark((function n(){var t;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t={userId:e.$db.getSync("userId")},n.next=3,e.getPersonMsg_fun(t);case 3:n.sent;case 4:case"end":return n.stop()}}),n)})))()},chooseImage:function(){var n=this;e.chooseImage({count:1,success:function(e){n.upLoad(e.tempFilePaths[0])}})},upLoad:function(n){var t=this;return(0,s.default)(o.default.mark((function r(){return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:"https://wx.lejiatuan.cn/data/lejiatuan/app/uploadFiles/photoUpload",e.uploadFile({url:"https://wx.lejiatuan.cn/data/lejiatuan/app/uploadFiles/photoUpload",name:"file",filePath:n,formData:{where:"user"},success:function(e){console.log(e,"成功");var n=JSON.parse(e.data);t.photo=n.fileName},complete:function(e){console.log(e,"complete")}});case 2:case"end":return r.stop()}}),r)})))()},getPhoneNumber:function(e){var n=this;return(0,s.default)(o.default.mark((function t(){var r;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),r={code:e.detail.code},t.next=4,n.getPhone_fun(r);case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()}}),onLoad:function(e){1!=e.new&&this.getPersonMsg(),console.log(e),this.isNew=1==e.new}};n.default=f}).call(this,t("543d")["default"])},"4ddc":function(e,n,t){"use strict";var r=t("d9db"),o=t.n(r);o.a},"5ea3":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){}));var r=function(){var e=this.$createElement;this._self._c},o=[]},d9db:function(e,n,t){},e852:function(e,n,t){"use strict";t.r(n);var r=t("5ea3"),o=t("f2f8");for(var s in o)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(s);t("4ddc");var a=t("f0c5"),u=Object(a["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);n["default"]=u.exports},f2f8:function(e,n,t){"use strict";t.r(n);var r=t("3183"),o=t.n(r);for(var s in r)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(s);n["default"]=o.a}},[["0c72","common/runtime","common/vendor"]]]);