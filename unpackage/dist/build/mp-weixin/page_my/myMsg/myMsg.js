(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["page_my/myMsg/myMsg"],{"0799":function(e,n,t){"use strict";(function(e){var r=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("2eee")),a=r(t("c973")),s=r(t("9523")),c=t("26cb");function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,s.default)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f={data:function(){return{cdn:this.$conf.CDN_HOST,personMsgForm:{nickName:"",phone:"",photo:""},nicknameError:"",phoneError:""}},watch:{personMsg:{deep:!0,handler:function(e){this.personMsgForm.nickName=e.name,this.personMsgForm.phone=e.phone,this.personMsgForm.photo=e.head}}},computed:i({},(0,c.mapState)({personMsg:function(e){return e.user.getPersonRes},personMsgForm1:function(e){return e.user.getPersonForm}})),methods:i(i({},(0,c.mapActions)({getPersonMsg_fun:"user/getPerson",setPersonMsg_fun:"user/setPerson"})),{},{chooseImage:function(){var n=this;e.chooseImage({count:1,success:function(e){n.upLoad(e.tempFilePaths[0])}})},upLoad:function(n){var t=this;return(0,a.default)(o.default.mark((function r(){return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:"https://wx.lejiatuan.cn/data/lejiatuan/app/uploadFiles/photoUpload",e.uploadFile({url:"https://wx.lejiatuan.cn/data/lejiatuan/app/uploadFiles/photoUpload",name:"file",filePath:n,formData:{where:"user"},success:function(e){console.log(e,"成功");var n=JSON.parse(e.data);t.personMsgForm.photo=n.fileName},complete:function(e){console.log(e,"complete")}});case 2:case"end":return r.stop()}}),r)})))()},validateNickname:function(){var e=this.personMsgForm.nickName;0===e.length?this.nicknameError="昵称不能为空":/^[\u4E00-\u9FA5]{2,10}$/.test(e)?this.nicknameError="":this.nicknameError="昵称必须为2~10个汉字"},validatePhone:function(){var e=this.personMsgForm.phone;0===e.length?this.phoneError="手机号码不能为空":/^\d{11}$/.test(e)?this.phoneError="":this.phoneError="请输入正确的手机号码"},subForm:function(){var e=this;return(0,a.default)(o.default.mark((function n(){var t;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.validateNickname(),e.validatePhone(),""==e.nicknameError){n.next=7;break}console.log(e.nicknameError),e.$win.nlog(e.nicknameError),n.next=16;break;case 7:if(""==e.phoneError){n.next=12;break}console.log(e.phoneError),e.$win.nlog(e.phoneError),n.next=16;break;case 12:return t=i({userId:e.$db.getSync("userId")},e.personMsgForm),n.next=15,e.setPersonMsg_fun(t);case 15:n.sent;case 16:case"end":return n.stop()}}),n)})))()},getPersonMsg:function(){var e=this;return(0,a.default)(o.default.mark((function n(){var t;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t={userId:e.$db.getSync("userId")},n.next=3,e.getPersonMsg_fun(t);case 3:n.sent;case 4:case"end":return n.stop()}}),n)})))()}}),onLoad:function(){this.getPersonMsg()},onShow:function(){}};n.default=f}).call(this,t("543d")["default"])},"2cb8":function(e,n,t){},"5fb6":function(e,n,t){"use strict";t.r(n);var r=t("d9e9"),o=t("ff6f");for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);t("f37e");var s=t("f0c5"),c=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);n["default"]=c.exports},"9f27":function(e,n,t){"use strict";(function(e,n){var r=t("4ea4");t("106e");r(t("66fd"));var o=r(t("5fb6"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(o.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},d9e9:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){}));var r=function(){var e=this.$createElement;this._self._c},o=[]},f37e:function(e,n,t){"use strict";var r=t("2cb8"),o=t.n(r);o.a},ff6f:function(e,n,t){"use strict";t.r(n);var r=t("0799"),o=t.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);n["default"]=o.a}},[["9f27","common/runtime","common/vendor"]]]);